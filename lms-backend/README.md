# LMS Backend (Spring Boot)

## Overview
A full-featured Learning Management System backend built with Spring Boot and MongoDB. Supports user, educator, and admin roles, course management, video upload/streaming, payment integration (Stripe), progress tracking, and reporting.

## Features
- User, Educator, and Admin roles
- Course creation, enrollment, and filtering (paid/free)
- Video upload to Azure Storage and secure streaming
- Payment integration with Stripe (one-time, subscription, coupons, refunds)
- Progress tracking and analytics
- Downloadable reports and receipts
- Access control for paid/free courses

## Setup
1. Install Java 17+ and Maven
2. Configure MongoDB and Azure Storage in `src/main/resources/application.properties`
3. Add Stripe keys and other secrets to `application.properties`
4. Build: `mvn clean install`
5. Run: `mvn spring-boot:run` or run `App.java`

## API Endpoints
- `/api/auth/register`, `/api/auth/login` - User authentication
- `/api/courses` - Course CRUD, filtering, access control
- `/api/videos/upload`, `/api/videos/stream` - Video upload/streaming
- `/api/payments/create-payment-intent`, `/api/payments/refund`, `/api/payments/receipt` - Payments, refunds, receipts
- `/api/subscriptions` - Subscription management
- `/api/coupons` - Coupon management
- `/api/course-progress` - Progress tracking
- `/api/admin/report`, `/api/admin/payments/analytics` - Admin reports/analytics

## Notes
- Ensure all secrets and credentials are set in `application.properties`
- Use the provided endpoints for all LMS features
- For further customization, see the codebase or contact the maintainer

## JWT secret configuration
This application requires a long secret to sign JWTs. It's recommended to use a URL-safe Base64-encoded secret.

Generate a secure URL-safe Base64 secret locally (example commands):

- PowerShell:
	```powershell
	$bytes = New-Object Byte[] 64; (New-Object System.Security.Cryptography.RNGCryptoServiceProvider).GetBytes($bytes); $s = [Convert]::ToBase64String($bytes); $s = $s -replace '\+','-' -replace '/','_' -replace '=+$',''; Write-Output $s
	```

- Bash (Linux/macOS):
	```bash
	openssl rand -base64 48 | tr '+/' '-_' | tr -d '='
	```

Paste the generated value into `src/main/resources/application.properties` as the value for `jwt.secret`.

Example (do NOT commit this to version control):
```
jwt.secret=UhY_PUqqAE_Kj6e0owrkqmDYE6crHhON9emG3Dissdk62o4tA1qK3Zye4V_aneZuTjW20YWnhAzfp199iken_w
```

---
Generated by GitHub Copilot

## Frontend examples
Quick examples to call the backend from browser-based frontends. These assume CORS origins are configured in `application.properties` and that you have a valid JWT token (from `/api/auth/login`).

Fetch (vanilla JS):

```javascript
const token = '<your-jwt-token-here>';
fetch('http://localhost:8080/api/courses', {
	method: 'GET',
	headers: {
		'Authorization': `Bearer ${token}`,
		'Content-Type': 'application/json'
	}
})
	.then(res => res.json())
	.then(data => console.log(data))
	.catch(err => console.error(err));
```

Axios example:

```javascript
import axios from 'axios';

const api = axios.create({ baseURL: 'http://localhost:8080' });
const token = '<your-jwt-token-here>';

api.get('/api/courses', { headers: { Authorization: `Bearer ${token}` } })
	.then(res => console.log(res.data))
	.catch(err => console.error(err));
```
